### Enhanced Video Review System (Quick Fix) ‚Äî README

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –º—ñ—Å—Ç–∏—Ç—å –º—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä —Ç–∞ UI –¥–ª—è —Ä—É—á–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –≤—ñ–¥–µ–æ, –ø–æ—à—É–∫—É, –∞ —Ç–∞–∫–æ–∂ QA‚Äë–∫–æ–Ω—Å–æ–ª—å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –±–∞–Ω—É ¬´–Ω–µ–≤–¥–∞–ª–∏—Ö¬ª –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó. –†—ñ—à–µ–Ω–Ω—è —Å–ø—Ä–æ—î–∫—Ç–æ–≤–∞–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫—É –Ω–∞ runpod.io (L40S) –∑ JupyterLab, —Ç–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ —à–ª—è—Ö–∏ —É —Ñ–∞–π–ª–æ–≤—ñ–π —Å–∏—Å—Ç–µ–º—ñ RunPod.

---

### –ó–º—ñ—Å—Ç
- –û–≥–ª—è–¥ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π
- –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —ñ —Ñ–∞–π–ª–∏ (—É–≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç)
- –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ (end‚Äëto‚Äëend)
- –ó–∞–ø—É—Å–∫ –Ω–∞ RunPod (L40S + JupyterLab)
- –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (Windows, –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
- –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è/–∞–Ω–∞–ª—ñ–∑) –Ω–∞ RunPod
- –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ API —Ç–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ UI
- –§–æ—Ä–º–∞—Ç–∏ –¥–∞–Ω–∏—Ö (JSON —Ñ–∞–π–ª–∏)
- –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
- –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (Troubleshooting)

---

### –û–≥–ª—è–¥ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π
- –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É, –æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –≤—ñ–¥–µ–æ.
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ, –æ—Ü—ñ–Ω–µ–Ω–æ, –æ—á—ñ–∫—É—é—Ç—å, —Ç–æ—â–æ).
- –ü–æ—à—É–∫ –ø–æ –≤—ñ–¥–µ–æ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ (–æ—Ü—ñ–Ω–µ–Ω—ñ/–Ω–µ–æ—Ü—ñ–Ω–µ–Ω—ñ, –±–∞–Ω–∏, reference, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó).
- QA‚Äë–∫–æ–Ω—Å–æ–ª—å –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –±–∞–Ω—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é –≤—ñ–¥–µ–æ.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Å—Ç–∏—Ö –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ (bandit_state, knowledge) –ø—ñ—Å–ª—è —Ä—É—á–Ω–∏—Ö –æ—Ü—ñ–Ω–æ–∫.

---

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —ñ —Ñ–∞–π–ª–∏ (—É–≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç)

- –ö–æ—Ä—ñ–Ω—å:
  - `simple_web_server.py` ‚Äî HTTP‚Äë—Å–µ—Ä–≤–µ—Ä —ñ UI (—Ä—É—á–Ω–∞ –æ—Ü—ñ–Ω–∫–∞, –ø–æ—à—É–∫, QA). –û–±—Ä–æ–±–Ω–∏–∫: `QAReviewHandler`.
  - `run_agent_qa.py` ‚Äî –∑–∞–ø—É—Å–∫ QA‚ÄëCLI (`qa.cli:main`).
  - `setup_qa_no_venv.py` ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —ñ–∑ `requirements_qa.txt` —É –ø–æ—Ç–æ—á–Ω–∏–π Python —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–µ–π—Ç‚Äë—Ñ–∞–π–ª—ñ–≤.
  - `eva_env_base.py` ‚Äî –±–∞–∑–æ–≤—ñ —à–ª—è—Ö–∏/–ª–æ–≥—É–≤–∞–Ω–Ω—è/—ñ–º–ø–æ—Ä—Ç–∏ heavy‚Äë–º–æ–¥—É–ª—ñ–≤ (GPU/ML), —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞.
  - `video_wan2_2_14B_t2v.json` ‚Äî –ø—Ä–∏–∫–ª–∞–¥ workflow –¥–ª—è ComfyUI (—à–ª—è—Ö –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ CLI).

- –î–æ–≤—ñ–¥–∫–∞/–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
  - `requirements_qa.txt` ‚Äî –ø—ñ–Ω —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –∞–Ω–∞–ª—ñ–∑—É/—É—Ç–∏–ª—ñ—Ç –¥–ª—è QA.

- –í–µ–±‚Äë–∫–ª—ñ—î–Ω—Ç:
  - `static/review_app.js` ‚Äî –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É/–æ—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è —á–µ—Ä–≥–∏ –≤—ñ–¥–µ–æ.
  - `static/search_page.js` ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ—à—É–∫—É.
  - `static/qa_console.js` ‚Äî QA‚Äë–∫–æ–Ω—Å–æ–ª—å (–±–∞–Ω –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π).
  - `static/watch_page.js` ‚Äî –ø–µ—Ä–µ–≥–ª—è–¥ –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–µ–æ + –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –æ—Ü—ñ–Ω–∫–∏.
  - `static/ban_wrapper.js` ‚Äî –∫–Ω–æ–ø–∫–∞ –±–∞–Ω—É –ø–æ–≤–µ—Ä—Ö `base` UI.

- –ê–≥–µ–Ω—Ç —Ç–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
  - `eva_p1/` ‚Äî –±–∞–∑–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ –∞–≥–µ–Ω—Ç–∞ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏:
    - `agent_base.py` ‚Äî –∫–ª–∞—Å `EnhancedVideoAgentV4`: —Ä–æ–±–æ—Ç–∞ –∑ ComfyUI, knowledge/manual_ratings, bandit, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è —á–µ—Ä–≥–∏ –Ω–∞ —Ä–µ–≤‚Äô—é.
    - `comfy_client.py` ‚Äî –∫–ª—ñ—î–Ω—Ç –¥–æ ComfyUI API (`/prompt`, `/history/<id>`, —Ç–æ—â–æ).
    - `multi_bandit.py` ‚Äî –±–∞–≥–∞—Ç–æ–≤–∏–º—ñ—Ä–Ω–∏–π bandit (UCB) + –º—ñ–≥—Ä–∞—Ü—ñ—è —Å—Ç–∞—Ä–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ —Å—Ç–µ–π—Ç—É + –∞–≤—Ç–æ–±–∞–Ω –ø–æ–≥–∞–Ω–∏—Ö –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π.
    - —ñ–Ω—à—ñ: `analysis_config.py`, `video_analyzer.py`, `workflow.py`, `openrouter_analyzer.py`, `knowledge_analyzer.py`, `prompt_generator.py`, `scenario.py`, `workflow.py`.
  - `eva_p2/` ‚Äî –º–µ—Ä–∂–µ–Ω–∏–π/–ø–æ–∫—Ä–∞—â–µ–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –∞–≥–µ–Ω—Ç–∞ —Ç–∞ CLI‚Äë–ø–∞—Ç—á—ñ:
    - `merged_agent.py` ‚Äî `EnhancedVideoAgentV4Merged`, –¥–æ–¥–∞—î –ø–æ–∫—Ä–∞—â–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ (eva_p3) —ñ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è.
    - `enhanced_analyzer.py`, `enhanced_logger.py`, `detection_result.py` ‚Äî —Ç–∏–ø–∏/–ª–æ–≥–µ—Ä/—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.
    - `cli_patch.py` ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π CLI (–Ω–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π –ø—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ `qa/cli.py`).
  - `eva_p3/` ‚Äî –ø–æ–≥–ª–∏–±–ª–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑/—Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è/–ª–æ–≥—É–≤–∞–Ω–Ω—è:
    - `video_processor.py`, `enhanced_analyzer.py` ‚Äî –ø–æ–∫—Ä–∞—â–µ–Ω—ñ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∏/–º–µ—Ç—Ä–∏–∫–∏.
    - `training.py` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ç—Ä–µ–Ω—É–≤–∞–ª—å–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω.
    - `logger.py`, `detection_logger.py`, `detection_types.py` ‚Äî –ª–æ–≥–µ—Ä–∏/—Ç–∏–ø–∏.

- QA –ø—Ä–æ—à–∞—Ä–æ–∫:
  - `qa/cli.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π CLI –¥–ª—è –∑–∞–ø—É—Å–∫—É –º–µ—Ä–∂–µ–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –∑ –ø–∞—Ç—á–∞–º–∏ QA (–¥–∏–≤. –Ω–∏–∂—á–µ ¬´–ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ –Ω–∞ RunPod¬ª).
  - `qa/agent_namespace.py` ‚Äî –Ω–µ–π–º—Å–ø–µ–π—Å –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É –º–µ—Ä–∂–µ–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.
  - `qa/patches.py` ‚Äî –Ω–∞–±—ñ—Ä –ø–∞—Ç—á—ñ–≤: –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ —É `auto_state/logs_improved`, –ø–æ—Å–∏–ª–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –±–∞–Ω—É, guard –¥–ª—è OpenRouter, –∑–±–∞–≥–∞—á–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫, —Ç–æ—â–æ.

#### –ü–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑ –æ–ø–∏—Å–æ–º —Ñ–∞–π–ª—ñ–≤

- –ö–æ—Ä—ñ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
  - `README.md` ‚Äî —Ü–µ–π —Ñ–∞–π–ª –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏.
  - `requirements_qa.txt` ‚Äî –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è QA/–∞–Ω–∞–ª—ñ–∑—É (numpy, opencv, sklearn, —Ç–æ—â–æ).
  - `setup_qa_no_venv.py` ‚Äî –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —É –ø–æ—Ç–æ—á–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ Python, —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç–µ–π—Ç‚ÄëJSON.
  - `run_agent_qa.py` ‚Äî thin‚Äëwrapper, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î `qa.cli:main` (–∑—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞).
  - `simple_web_server.py` ‚Äî –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8189) –∑ UI —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏ (`/`, `/search`, `/qa`, `/watch`). –û–±—Ä–æ–±–ª—è—î API: `/api/stats`, `/api/videos`, `/api/search`, `/api/video_details`, `/api/rate`, `/api/ban_combo`, `/video/<name>`.
  - `eva_env_base.py` ‚Äî –±–∞–∑–æ–≤—ñ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —à–ª—è—Ö—ñ–≤ `/workspace/wan22_system/...`, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—É–≤–∞–Ω–Ω—è, —ñ–º–ø–æ—Ä—Ç–∏ heavy‚Äë–±—ñ–±–ª—ñ–æ—Ç–µ–∫, –ø—Ä–∞–ø–æ—Ä—Ü—ñ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ (GPT, TF, mediapipe, scipy, —Ç–æ—â–æ).
  - `video_wan2_2_14B_t2v.json` ‚Äî –ø—Ä–∏–∫–ª–∞–¥ JSON‚Äë–≤–æ—Ä–∫—Ñ–ª–æ—É –¥–ª—è ComfyUI (–ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —è–∫ `--workflow`).
  - `auto_state/` ‚Äî –ø–∞–ø–∫–∞ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∏ (–Ω–∞ RunPod –∑–∞–∑–≤–∏—á–∞–π —Ä–æ–∑–º—ñ—â—É—î—Ç—å—Å—è –ø—ñ–¥ `/workspace/wan22_system/auto_state`):
    - `manual_ratings.json` ‚Äî —Ä—É—á–Ω—ñ –æ—Ü—ñ–Ω–∫–∏ –≤—ñ–¥–µ–æ (–æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è —á–µ—Ä–µ–∑ POST `/api/rate`).
    - `bandit_state.json` ‚Äî —Å—Ç–∞–Ω –±–∞–Ω–¥–∏—Ç–∞: `combo_stats`, `t`, `banned_combos`.
    - `knowledge.json` ‚Äî —ñ—Å—Ç–æ—Ä—ñ—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π/–º–µ—Ç—Ä–∏–∫/–ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, `best_score`, `best_params`.
    - `review_queue.json` ‚Äî —á–µ—Ä–≥–∞ –Ω–∞ —Ä–µ–≤‚Äô—é (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –∑–±–∞–≥–∞—á—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ QA API).
    - `ban_history.json`, `reference_params.json` ‚Äî –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ (–∑–∞ –ø–æ—Ç—Ä–µ–±–∏).
    - `logs_improved/` ‚Äî –ª–æ–≥–∏ –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É/—Ç—Ä–µ–Ω—É–≤–∞–Ω—å: `analysis.log`, `training.log`, `merged_analysis.jsonl`, `main.log`.

- `static/` ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ JavaScript:
  - `review_app.js` ‚Äî –ª–æ–≥—ñ–∫–∞ –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –≤—ñ–¥–µ–æ —á–µ—Ä–µ–∑ `/api/videos`, –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –æ—Ü—ñ–Ω–æ–∫ –Ω–∞ `/api/rate`.
  - `search_page.js` ‚Äî –∑–∞–ø–∏—Ç –¥–æ `/api/search`, —Ä–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ñ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏.
  - `qa_console.js` ‚Äî –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ –≤—ñ–¥–µ–æ —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—î `POST /api/ban_combo`.
  - `watch_page.js` ‚Äî –ø–æ–∫–∞–∑ –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–µ–æ –∑ `/api/video_details` —Ç–∞ —Ñ–æ—Ä–º–∞ –æ—Ü—ñ–Ω–∫–∏.
  - `ban_wrapper.js` ‚Äî –∫–Ω–æ–ø–∫–∞ –±–∞–Ω—É –ø–æ–≤–µ—Ä—Ö `base` UI.

- `eva_p1/` ‚Äî –±–∞–∑–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∞–≥–µ–Ω—Ç–∞:
  - `agent_base.py` ‚Äî –∫–ª–∞—Å `EnhancedVideoAgentV4`:
    - –∫–µ—Ä—É—î —à–ª—è—Ö–∞–º–∏/—Å—Ç–∞–Ω–æ–º (`knowledge.json`, `manual_ratings.json`, `review_queue.json`),
    - —ñ–Ω—Ç–µ–≥—Ä—É—î `ComfyClient` –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ—Ä–∫—Ñ–ª–æ—É –≤ ComfyUI —ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤,
    - –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É (–¥–∏–≤. `workflow.py`),
    - –∞–Ω–∞–ª—ñ–∑—É—î –≤—ñ–¥–µ–æ (–ø—Ä–æ—Å—Ç–∏–π –∞–Ω–∞–ª—ñ–∑ `VideoAnalyzer`) —ñ –ø–æ–ø–æ–≤–Ω—é—î `knowledge.json`,
    - –∫–µ—Ä—É—î `MultiDimensionalBandit` (–≤–∏–±—ñ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è reward),
    - –¥–æ–¥–∞—î –Ω–æ–≤—ñ –≤—ñ–¥–µ–æ –¥–æ `review_queue.json` (thumbnails, –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç, –º–µ—Ç—Ä–∏–∫–∏).
  - `comfy_client.py` ‚Äî REST‚Äë–∫–ª—ñ—î–Ω—Ç ComfyUI (`/prompt`, `/history/<id>`, `object_info`).
  - `multi_bandit.py` ‚Äî UCB‚Äë–±–∞–Ω–¥–∏—Ç:
    - –≥–µ–Ω–µ—Ä—É—î/–º—ñ–≥—Ä—É—î `combo_stats`,
    - autoban ¬´–ø–æ–≥–∞–Ω–∏—Ö¬ª –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π, select/update —ñ–∑ UCB –±–æ–Ω—É—Å–æ–º,
    - –∫–ª—é—á –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó: `sampler|scheduler|fps|cfg|steps|WIDTHxHEIGHT`.
  - `analysis_config.py` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–Ω–∞–ª—ñ–∑—É –≤—ñ–¥–µ–æ (–ø–æ—Ä–æ–≥–∏, —Ä–µ–∂–∏–º–∏, –ª–æ–≥—É–≤–∞–Ω–Ω—è).
  - `video_analyzer.py` ‚Äî –ø—Ä–æ—Å—Ç—ñ –º–µ—Ç—Ä–∏–∫–∏ (blur, exposure, blockiness, flicker) —ñ –∑–≤–µ–¥–µ–Ω–∏–π `overall`.
  - `workflow.py` ‚Äî –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—É–∑–ª—ñ–≤ –≤–æ—Ä–∫—Ñ–ª–æ—É —Ç–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (fps/seconds/size/sampler/scheduler/steps/cfg/seed/prefix) —É JSON ComfyUI.
  - `knowledge_analyzer.py` ‚Äî —ñ–Ω—Å–∞–π—Ç–∏ –∑–∞ —ñ—Å—Ç–æ—Ä—ñ—î—é knowledge (–¥–µ—Ñ–µ–∫—Ç–∏/quality‚Äë–ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è/—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ñ–≤).
  - `openrouter_analyzer.py` ‚Äî —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ GPT —á–µ—Ä–µ–∑ OpenRouter (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ; fallback —è–∫—â–æ GPT –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π).
  - `prompt_generator.py` + `scenario.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä–æ–∑—à–∏—Ä–µ–Ω–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤ (–µ—Ä–æ—Ç–∏—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —è–∫—ñ—Å—Ç—å/–¥–µ—Ñ–µ–∫—Ç–∏, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏, —Ç–µ–∫—Å—Ç–æ–≤–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è).

- `eva_p2/` ‚Äî –º–µ—Ä–∂–µ–Ω—ñ/–ø–æ–∫—Ä–∞—â–µ–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∞–≥–µ–Ω—Ç–∞:
  - `merged_agent.py` ‚Äî –∫–ª–∞—Å `EnhancedVideoAgentV4Merged`:
    - –Ω–∞—Å–ª—ñ–¥—É—î –±–∞–∑–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, –ø—ñ–¥–∫–ª—é—á–∞—î –ø–æ–∫—Ä–∞—â–µ–Ω–∏–π `VideoProcessor`/`EnhancedLogger` (—ñ–∑ `eva_p3`),
    - —É `run_iteration_v4` –æ–±—á–∏—Å–ª—é—î blended –º–µ—Ç—Ä–∏–∫—É: `0.6 * base_overall + 0.4 * deep_quality`, –¥–æ–ø–∏—Å—É—î –ª–æ–≥–∏ JSONL.
  - `enhanced_analyzer.py`, `detection_result.py`, `enhanced_logger.py` ‚Äî –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ç–∏–ø–∏/–∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä/–ª–æ–≥–µ—Ä –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω—É.
  - `cli_patch.py` ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π CLI (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ ComfyUI, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ª–æ–≥—É–≤–∞–Ω–Ω—è). 

- `eva_p3/` ‚Äî —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑/–ª–æ–≥—É–≤–∞–Ω–Ω—è/—Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è:
  - `video_processor.py` ‚Äî –ø–æ–∫—Ä–∞—â–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä (–≥–ª–∏–±—à—ñ –¥–µ—Ç–µ–∫—Ç–æ—Ä–∏: anatomy/face/artifacts/temporal/—á–∞—Å—Ç–æ—Ç–Ω—ñ –æ–∑–Ω–∞–∫–∏), –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–æ–∑—à–∏—Ä–µ–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏.
  - `logger.py` ‚Äî –ª–æ–≥–µ—Ä –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–∏—Ö –º–µ—Ç—Ä–∏–∫; `detection_logger.py`, `detection_types.py` ‚Äî —Ç–∏–ø–∏ –π –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–µ—Ç–µ–∫—Ü—ñ–π.
  - `training.py` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ç—Ä–µ–Ω–µ—Ä –º–æ–¥–µ–ª–µ–π/–ø–æ—Ä–æ–≥—ñ–≤ –º–µ—Ç—Ä–∏–∫ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ).

- `qa/` ‚Äî –æ–±–≥–æ—Ä—Ç–∫–∞ —Ç–∞ –ø–∞—Ç—á—ñ –¥–ª—è QA‚Äë—Ä–µ–∂–∏–º—É:
  - `cli.py` ‚Äî –ø–∞—Ä—Å–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç–∏ (`--api`, `--workflow`, `--state-dir`, `--iterations`, `--use-enhanced-analysis`, `--train-improved`, `--openrouter-key`),
    –ø—ñ–¥–∫–ª—é—á–∞—î –ø–∞—Ç—á—ñ –∑ `qa/patches.py`, —ñ–Ω—ñ—Ü—ñ—é—î `EnhancedVideoAgentV4Merged` —ñ –∑–∞–ø—É—Å–∫–∞—î –ø–æ—à—É–∫/–≥–µ–Ω–µ—Ä–∞—Ü—ñ—é.
  - `patches.py` ‚Äî –ø–∞—Ç—á—ñ: –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ —É `auto_state/logs_improved`, –ø–æ—Å–∏–ª–µ–Ω–Ω—è –±–∞–Ω‚Äë–ø—Ä–∞–≤–∏–ª, guard –¥–ª—è OpenRouter, –∑–±–∞–≥–∞—á–µ–Ω–Ω—è –º–µ—Ç—Ä–∏–∫.
  - `agent_namespace.py` ‚Äî –∑—Ä—É—á–Ω–∏–π –Ω–µ–π–º—Å–ø–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ—Ä–∂–µ–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å–ø—Ä–æ—â–µ–Ω–æ):
```
simple_web_server.py   # —Å–µ—Ä–≤–µ—Ä + UI
static/
  review_app.js        # –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–ø–µ—Ä–µ–≥–ª—è–¥/–æ—Ü—ñ–Ω–∫–∞ —á–µ—Ä–≥–∏ –≤—ñ–¥–µ–æ)
  search_page.js       # —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ—à—É–∫—É
  qa_console.js        # QA‚Äë–∫–æ–Ω—Å–æ–ª—å (–±–∞–Ω –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π)
  watch_page.js        # —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–µ–æ
  ban_wrapper.js       # –æ–≤–µ—Ä—Ö–µ–¥‚Äë–ø–∞–Ω–µ–ª—å –±–∞–Ω—É –¥–ª—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
auto_state/            # JSON‚Äë—Å—Ç–∞–Ω (–Ω–∞ RunPod —Ü–µ /workspace/wan22_system/auto_state)
```

---

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–æ–±–æ—Ç–∏ (end‚Äëto‚Äëend)
1) –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –∞–≥–µ–Ω—Ç/–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–±–µ—Ä—ñ–≥–∞—î –≤—ñ–¥–µ–æ `.mp4` —É –∫–∞—Ç–∞–ª–æ–∑—ñ `/workspace/ComfyUI/output/`.
2) –°–µ—Ä–≤–µ—Ä –Ω–∞ `/` —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å UI, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î:
   - `GET /api/stats` ‚Äî –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞;
   - `GET /api/videos?offset&limit` ‚Äî —Å–ø–∏—Å–æ–∫ –Ω–µ–æ—Ü—ñ–Ω–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (–ø–∞–≥—ñ–Ω–∞—Ü—ñ—è), –∑–±–∞–≥–∞—á–µ–Ω–∏–π –¥–∞–Ω–∏–º–∏ –∑ `knowledge.json`.
3) –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–±–∏—Ä–∞—î –≤—ñ–¥–µ–æ, –æ—Ü—ñ–Ω—é—î –π–æ–≥–æ –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Ñ–æ—Ä–º—É:
   - `POST /api/rate` ‚Äî —Å–µ—Ä–≤–µ—Ä –∑–∞–ø–∏—Å—É—î –æ—Ü—ñ–Ω–∫—É –≤ `manual_ratings.json` —Ç–∞ –æ–Ω–æ–≤–ª—é—î `bandit_state.json` —ñ `knowledge.json` (–Ω–∞–π–∫—Ä–∞—â—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –º—ñ—Ç–∫–∏ –≤ `history`).
4) –î–æ–¥–∞—Ç–∫–æ–≤–æ:
   - `GET /search` + `GET /api/search` ‚Äî –ø–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ, —Å—Ç–∞—Ç—É—Å–∞–º, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º, –∞–≤—Ç–æ‚Äë–º–µ—Ç—Ä–∏–∫–∞–º;
   - `GET /qa` + `POST /api/ban_combo` ‚Äî —à–≤–∏–¥–∫–∏–π –±–∞–Ω ¬´–Ω–µ–≤–¥–∞–ª–∏—Ö¬ª –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π (–∑–∞ `video_name`, `combo_key` –∞–±–æ `params`).
5) –í—ñ–¥–µ–æ –≤—ñ–¥–¥–∞—é—Ç—å—Å—è —è–∫ `GET /video/<name>` —ñ–∑ –∫–∞—Ç–∞–ª–æ–≥—É –≤—ñ–¥–µ–æ.

---

### –ó–∞–ø—É—Å–∫ –Ω–∞ RunPod (L40S + JupyterLab)

–í–∞–∂–ª–∏–≤–æ: —à–ª—è—Ö–∏ –∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω—ñ –ø—ñ–¥ RunPod. –ù—ñ—á–æ–≥–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –ª–∏—à–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥–∏ (—è–∫—â–æ —ó—Ö —â–µ –Ω–µ–º–∞—î) —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä —É JupyterLab Terminal.

1) –í—ñ–¥–∫—Ä–∏–π—Ç–µ JupyterLab ‚Üí Terminal —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ):
```bash
mkdir -p /workspace/ComfyUI/output
mkdir -p /workspace/wan22_system/auto_state
```

2) –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
python /workspace/wan22_system/simple_web_server.py
```

3) –í–∏–≤—ñ–¥ –ø–æ–∫–∞–∂–µ –ø–æ—Ä—Ç `8189`. –£ RunPod –≤—ñ–¥–∫—Ä–∏–π—Ç–µ/–ø—Ä–æ–∫—Å—ñ—é–π—Ç–µ –ø–æ—Ä—Ç `8189` —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º URL.

–°—Ç–æ—Ä—ñ–Ω–∫–∏ UI:
- –ì–æ–ª–æ–≤–Ω–∞: `/` (–ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ –æ—Ü—ñ–Ω–∫–∞ —á–µ—Ä–≥–∏ –≤—ñ–¥–µ–æ)
- –ü–æ—à—É–∫: `/search`
- QA‚Äë–∫–æ–Ω—Å–æ–ª—å: `/qa`
- –ü–µ—Ä–µ–≥–ª—è–¥ –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–µ–æ: `/watch?name=<video.mp4>`

–ü–æ—Ä–∞–¥–∞: –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –ø–æ—è–≤–∏–ª–∏—Å—å `.mp4` —É `/workspace/ComfyUI/output/` ‚Äî —Ç–æ–¥—ñ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –∑‚Äô—è–≤–ª—è—Ç—å—Å—è –≤—ñ–¥–µ–æ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏.

---

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (Windows, –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)
### –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è/–∞–Ω–∞–ª—ñ–∑) –Ω–∞ RunPod

–ê–≥–µ–Ω—Ç (–ø–æ—à—É–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –∑–∞–ø—É—Å–∫ –≤–æ—Ä–∫—Ñ–ª–æ—É –≤ ComfyUI, –∑–±—ñ—Ä –º–µ—Ç—Ä–∏–∫) –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤—ñ–¥ –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä–∞. –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —É JupyterLab Terminal:

1) –ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (–æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ pod):
```bash
python /workspace/wan22_system/setup_qa_no_venv.py --root /workspace/wan22_system
```

2) –ó–∞–ø—É—Å—Ç–∏—Ç–∏ ComfyUI API (–ø–æ—Ä—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 8188) ‚Äî –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤–∞—à–æ–≥–æ —Å–ø–æ—Å–æ–±—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è ComfyUI.

3) –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–≥–µ–Ω—Ç–∞ –∑ QA‚ÄëCLI (–≤ –æ–∫—Ä–µ–º–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ):
```bash
python /workspace/wan22_system/run_agent_qa.py
```

`run_agent_qa.py` –≤–∏–∫–ª–∏–∫–∞—î `qa.cli:main`, —è–∫–∏–π –ø—Ä–∏–π–º–∞—î –∞—Ä–≥—É–º–µ–Ω—Ç–∏:
```bash
python -m qa.cli \
  --api http://127.0.0.1:8188 \
  --workflow /workspace/wan22_system/video_wan2_2_14B_t2v.json \
  --state-dir /workspace/wan22_system/auto_state \
  --seconds 5.0 \
  --iterations 10 \
  --openrouter-key $OPENROUTER_API_KEY \
  --use-enhanced-analysis \
  --train-improved
```

–ü—Ä–∏–º—ñ—Ç–∫–∏:
- `--workflow` –º–∞—î –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –≤–∞–ª—ñ–¥–Ω–∏–π JSON –≤–æ—Ä–∫—Ñ–ª–æ—É ComfyUI.
- `--iterations` –≤–∏–∑–Ω–∞—á–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Ç–µ—Ä–∞—Ü—ñ–π –ø–æ—à—É–∫—É/–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó.
- –Ø–∫—â–æ –≤–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ GPT/OpenRouter ‚Äî –æ–ø—É—Å—Ç—ñ—Ç—å `--openrouter-key`.
- –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ (`--use-enhanced-analysis`) —Ç–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è (`--train-improved`) –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ; –∑–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –≤–∏–º–∏–∫–∞–π—Ç–µ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó GPU/—á–∞—Å—É.

#### Reference-Only Mode (–µ—Ç–∞–ª–æ–Ω–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏)

–©–æ–± –∞–≥–µ–Ω—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤ –¢–Ü–õ–¨–ö–ò –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∑ `reference_params.json` —Ç–∞ —Ü–∏–∫–ª—ñ—á–Ω–æ —ó—Ö –ø–µ—Ä–µ–±–∏—Ä–∞ÃÅ–≤:

```bash
python -m qa.cli \
  --api http://127.0.0.1:8188 \
  --workflow /workspace/wan22_system/video_wan2_2_14B_t2v.json \
  --state-dir /workspace/wan22_system/auto_state \
  --seconds 6.0 \
  --iterations 10 \
  --use-enhanced-analysis \
  --reference-only \
  --reference-file /workspace/wan22_system/auto_state/reference_params.json
```

–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ `reference_params.json`:
- `{ "reference_combinations": [ {..params..} | {"params":{..}} ] }`
- `{ "reference_videos": [ { "params": {..} } ] }`
- `{ "params_list" | "combos" | "list": [ {..} | {"params":{..}} ] }`
- –ø—Ä–æ—Å—Ç–∏–π –º–∞—Å–∏–≤: `[ {..} | { "params":{..} } ]`

–ó–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ `"seconds"` —É –∫–æ–∂–Ω–æ–º—É `params` –≤—ñ–Ω –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π; —è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π ‚Äî –±–µ—Ä–µ—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è –∑ `--seconds`.

4) –ü–∞—Ä–∞–ª–µ–ª—å–Ω–æ —Ç—Ä–∏–º–∞–π—Ç–µ –∑–∞–ø—É—â–µ–Ω–∏–º –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä—É—á–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏ (`simple_web_server.py`), —â–æ–± –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó:
```bash
python /workspace/wan22_system/simple_web_server.py
```

–í–∑–∞—î–º–æ–¥—ñ—è:
- –ê–≥–µ–Ω—Ç –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏/—Å—Ç–∞–Ω —É `/workspace/wan22_system/auto_state/` —ñ –≤—ñ–¥–µ–æ —É `/workspace/ComfyUI/output/`.
- –í–µ–±‚ÄëUI –ø—ñ–¥—Ö–æ–ø–ª—é—î –Ω–æ–≤—ñ –≤—ñ–¥–µ–æ, –ø–æ–∫–∞–∑—É—î –º–µ—Ç—Ä–∏–∫–∏/–ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑ `knowledge.json` —ñ –ø—Ä–∏–π–º–∞—î —Ä—É—á–Ω—ñ –æ—Ü—ñ–Ω–∫–∏, —â–æ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –ø–æ–¥–∞–ª—å—à–∏–π –ø–æ—à—É–∫ (bandit).

---

### OpenRouter –∞–Ω–∞–ª—ñ–∑ —Ä—É—á–Ω–∏—Ö –æ—Ü—ñ–Ω–æ–∫

- –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è: –ø–µ—Ä–µ–¥–∞–π—Ç–µ –∫–ª—é—á `--openrouter-key <sk-or-...>` –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –∞–≥–µ–Ω—Ç–∞.
- –ü–æ–ø–µ—Ä–µ–¥–Ω—è —É–º–æ–≤–∞: –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `openai` (–≤–∂–µ –≤—Ö–æ–¥–∏—Ç—å —É `requirements_qa.txt`).
- –†–æ–±–æ—Ç–∞: –ø—Ä–∏ –ø–æ—è–≤—ñ/–æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ `manual_ratings.json` –∞–≥–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î OpenRouter –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤—ñ–¥–µ–æ —ñ –∑–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —É:
  - `/workspace/wan22_system/auto_state/openrouter_results.json`
- –õ–æ–≥–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó/–≤–∏–∫–ª–∏–∫—ñ–≤ –±—É–¥—É—Ç—å —É `auto_state/logs_improved/main.log` (QA‚Äë—Ä–µ–∂–∏–º) –∞–±–æ `logs/main.log`:
  - ¬´ü§ñ OpenRouter GPT analyzer initialized successfully¬ª ‚Äî —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
  - ¬´ü§ñ –ó–Ω–∞–π–¥–µ–Ω–æ –Ω–æ–≤—ñ manual_ratings ‚Äî –∑–∞–ø—É—Å–∫–∞—î–º–æ OpenRouter –∞–Ω–∞–ª—ñ–∑¬ª ‚Äî –∑–∞–ø—É—â–µ–Ω–æ
  - ¬´‚úÖ OpenRouter: <video> score=‚Ä¶¬ª ‚Äî —É—Å–ø—ñ—à–Ω–∏–π –∞–Ω–∞–ª—ñ–∑

---

### –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ —Ç—Ä–∞—Å—É–≤–∞–Ω–Ω—è

- –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (QA‚Äë—Ä–µ–∂–∏–º) –ª–æ–≥–∏ –ø–∏—à—É—Ç—å—Å—è –¥–æ `auto_state/logs_improved/`:
  - `main.log` ‚Äî –∑–∞–≥–∞–ª—å–Ω—ñ –ø–æ–¥—ñ—ó (–∑–∞–ø—É—Å–∫/–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è/–∞–Ω–∞–ª—ñ–∑/–ø–æ–º–∏–ª–∫–∏)
  - `analysis.log` ‚Äî –¥–µ—Ç–∞–ª—ñ –∞–Ω–∞–ª—ñ–∑—É
  - `training.log` ‚Äî —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è (—è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ)
  - `merged_analysis.jsonl` ‚Äî JSONL‚Äë–∑–≤–µ–¥–µ–Ω–Ω—è –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É
- –Ø–∫—â–æ QA‚Äë–ø–∞—Ç—á—ñ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ñ ‚Äî –ª–æ–≥–∏ —É –ª–æ–∫–∞–ª—å–Ω—ñ–π –ø–∞–ø—Ü—ñ `logs/` –∑ —Ç–∞–∫–∏–º–∏ –∂ —ñ–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª—ñ–≤.
- –ü—ñ–¥ —á–∞—Å –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–¥–∞—á—ñ —É ComfyUI –ª–æ–≥—É—é—Ç—å—Å—è –∫–ª—é—á–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (sampler/scheduler/steps/cfg/fps), `prompt_id` —Ç–∞ —Ñ–∞–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è/—Ç–∞–π–º–∞—É—Ç.


---

### –ü–æ–≤–Ω–∞ –ø–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è

#### RunPod (L40S + JupyterLab)

1) –ó–∞–ø—É—Å—Ç—ñ—Ç—å pod —ñ–∑ JupyterLab —Ç–∞ GPU L40S (–æ–±—Ä–∞–∑ –∑  ComfyUI Manager Permanent Disk torch2.2). –¢–∞ –¥–æ–¥–∞–π—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø–æ—Ä—Ç 8189
2) –í—ñ–¥–∫—Ä–∏–π—Ç–µ JupyterLab ‚Üí Terminal.
3) –†–æ–∑–º—ñ—Å—Ç—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —É `/workspace/wan22_system` (–∞–±–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ —Ç—É–¥–∏ –≤–º—ñ—Å—Ç):
```bash
cd /workspace
mkdir -p wan22_system
# –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –∫–ª–æ–Ω—É–≤–∞—Ç–∏:
# git clone <repo_url> wan22_system
```
4) –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–ª—è –≤—ñ–¥–µ–æ/—Å—Ç–∞–Ω—É (–Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ —ó—Ö —â–µ –Ω–µ–º–∞—î):
```bash
mkdir -p /workspace/ComfyUI/output
mkdir -p /workspace/wan22_system/auto_state
```
5) –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ —Å—Ç–µ–π—Ç‚Äë—Ñ–∞–π–ª–∏:
```bash
python /workspace/wan22_system/setup_qa_no_venv.py --root /workspace/wan22_system
```
6) –ó–∞–ø—É—Å—Ç—ñ—Ç—å ComfyUI API (–ø–æ—Ä—Ç 8188) ‚Äî –∑–≥—ñ–¥–Ω–æ –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é –≤–∞—à–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è ComfyUI.
7) –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8189) –≤ –æ–∫—Ä–µ–º–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ:
```bash
python /workspace/wan22_system/simple_web_server.py
```
8) –í—ñ–¥–∫—Ä–∏–π—Ç–µ —É RunPod URL –¥–ª—è –ø–æ—Ä—Ç—É 8189 (–≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ UI).
9) –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∞–≥–µ–Ω—Ç–∞ (—â–µ –æ–¥–∏–Ω —Ç–µ—Ä–º—ñ–Ω–∞–ª):
```bash
python /workspace/wan22_system/run_agent_qa.py
# –∞–±–æ –∑ —è–≤–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
python -m qa.cli \
  --api http://127.0.0.1:8188 \
  --workflow /workspace/wan22_system/video_wan2_2_14B_t2v.json \
  --state-dir /workspace/wan22_system/auto_state \
  --seconds 5.0 \
  --iterations 10 \
  --use-enhanced-analysis
```
10) –£ –ø—Ä–æ—Ü–µ—Å—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –Ω–æ–≤—ñ `.mp4` –∑‚Äô—è–≤–ª—è—Ç–∏–º—É—Ç—å—Å—è —É `/workspace/ComfyUI/output/`, —ñ –≤–∏ –∑–º–æ–∂–µ—Ç–µ —ó—Ö –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ UI.

–û–ø—Ü—ñ–π–Ω–æ: –¥–ª—è GPT‚Äë–∞–Ω–∞–ª—ñ–∑—É –∑–∞–¥–∞–π—Ç–µ `--openrouter-key $OPENROUTER_API_KEY` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É OpenAI (–≤–∂–µ —î —É `requirements_qa.txt`).

#### Windows (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)

1) –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Python 3.10+ (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 3.10) —ñ `pip`.
2) –°—Ç–≤–æ—Ä—ñ—Ç—å –∞–Ω–∞–ª–æ–≥–∏ RunPod‚Äë—à–ª—è—Ö—ñ–≤:
```powershell
New-Item -ItemType Directory -Force -Path C:\workspace\ComfyUI\output | Out-Null
New-Item -ItemType Directory -Force -Path C:\workspace\wan22_system\auto_state | Out-Null
```
3) –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```powershell
cd C:\IT\GItRepo\try294
python -m pip install --upgrade pip setuptools wheel
pip install -r requirements_qa.txt
```
4) –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω–∏–π ComfyUI API –Ω–∞ `http://127.0.0.1:8188` (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–æ).
5) –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä:
```powershell
python simple_web_server.py
```
6) (–û–ø—Ü.) –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∞–≥–µ–Ω—Ç–∞:
```powershell
python run_agent_qa.py
# –∞–±–æ:
python -m qa.cli --api http://127.0.0.1:8188 --workflow C:\IT\GItRepo\try294\video_wan2_2_14B_t2v.json --state-dir C:\workspace\wan22_system\auto_state --iterations 5
```
7) –ü–æ–∫–ª–∞–¥—ñ—Ç—å `.mp4` —É `C:\workspace\ComfyUI\output` ‚Äî –≤–æ–Ω–∏ –∑‚Äô—è–≤–ª—è—Ç—å—Å—è –≤ UI –Ω–∞ `http://127.0.0.1:8189/`.


–®–ª—è—Ö–∏ —É –∫–æ–¥—ñ –≤–∫–∞–∑–∞–Ω—ñ –ø—ñ–¥ RunPod. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–µ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ —Ü—ñ —à–ª—è—Ö–∏ —É Windows (—Å—Ç–≤–æ—Ä–∏—Ç–∏ –∞–Ω–∞–ª–æ–≥–∏ –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ –Ω–∞ –¥–∏—Å–∫—É `C:`):

```powershell
New-Item -ItemType Directory -Force -Path C:\workspace\ComfyUI\output | Out-Null
New-Item -ItemType Directory -Force -Path C:\workspace\wan22_system\auto_state | Out-Null

cd C:\IT\GItRepo\try294
python simple_web_server.py
```

–î–∞–ª—ñ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ `http://127.0.0.1:8189/` —É –±—Ä–∞—É–∑–µ—Ä—ñ. –ü–æ–∫–ª–∞–¥—ñ—Ç—å `.mp4` —É `C:\workspace\ComfyUI\output` ‚Äî –≤–æ–Ω–∏ –∑‚Äô—è–≤–ª—è—Ç—å—Å—è –≤ UI.

–ü—Ä–∏–º—ñ—Ç–∫–∞: –¥–ª—è –ø–æ–≤–Ω–æ—ó –∫—Ä–æ—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–≤–∞—Ç–∏ —à–ª—è—Ö–∏ —á–µ—Ä–µ–∑ ENV/CLI, –∞–ª–µ –ø–æ—Ç–æ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è —Å–≤—ñ–¥–æ–º–æ —Å–ø—Ä–æ—â–µ–Ω–∞ –ø—ñ–¥ RunPod.

---

### –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏ API —Ç–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ UI

–°—Ç–æ—Ä—ñ–Ω–∫–∏ UI:
- `GET /` ‚Äî –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (JS: `static/review_app.js`)
- `GET /search` ‚Äî —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ—à—É–∫—É (JS: `static/search_page.js`)
- `GET /qa` ‚Äî QA‚Äë–∫–æ–Ω—Å–æ–ª—å (JS: `static/qa_console.js`)
- `GET /watch?name=<video.mp4>` ‚Äî –ø–µ—Ä–µ–≥–ª—è–¥ –æ–¥–Ω–æ–≥–æ –≤—ñ–¥–µ–æ (JS: `static/watch_page.js`)

API:
- `GET /api/stats` ‚Üí –∞–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
- `GET /api/videos?offset=<int>&limit=<int>` ‚Üí —Å–ø–∏—Å–æ–∫ –Ω–µ–æ—Ü—ñ–Ω–µ–Ω–∏—Ö –≤—ñ–¥–µ–æ (–ø–∞–≥—ñ–Ω–∞—Ü—ñ—è), –∑–±–∞–≥–∞—á–µ–Ω–∏–π –¥–∞–Ω–∏–º–∏ –∑ `knowledge.json`.
- `GET /video/<name>` ‚Üí —Å–∞–º —Ñ–∞–π–ª –≤—ñ–¥–µ–æ.
- `POST /api/rate` ‚Üí –∑–±–µ—Ä–µ–≥—Ç–∏ —Ä—É—á–Ω—É –æ—Ü—ñ–Ω–∫—É.
- `GET /api/search` ‚Üí –ø–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ/–ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö/—Å—Ç–∞—Ç—É—Å–∞—Ö.
- `GET /api/video_details?name=<video.mp4>` ‚Üí –¥–µ—Ç–∞–ª—ñ –∑ knowledge/manual + —Ñ–∞–∫—Ç –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —Ñ–∞–π–ª—É.
- `POST /api/ban_combo` (–ª–∏—à–µ –≤ `QAReviewHandler`) ‚Üí –±–∞–Ω –∑–∞–∑–Ω–∞—á–µ–Ω–æ—ó –∫–æ–º–±–æ.

–ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤:

`POST /api/rate` (JSON):
```json
{
  "video_name": "sample_1699999999.mp4",
  "rating": {
    "overall_quality": 7,
    "visual_quality": 8,
    "motion_quality": 6,
    "prompt_adherence": 7,
    "creativity": 7,
    "technical_quality": 7,
    "is_reference": true,
    "comments": "–î–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–±—Ä–µ"
  }
}
```

`POST /api/ban_combo` (JSON ‚Äî –æ–¥–∏–Ω —ñ–∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤):
```json
{ "video_name": "sample_1699999999.mp4" }
```
–∞–±–æ
```json
{ "combo_key": "sampler|scheduler|fps|cfg|steps|WIDTHxHEIGHT" }
```
–∞–±–æ
```json
{
  "params": {"sampler": "euler", "scheduler": "karras", "fps": 20, "cfg_scale": 7, "steps": 25, "width": 768, "height": 432}
}
```

---

### –§–æ—Ä–º–∞—Ç–∏ –¥–∞–Ω–∏—Ö (JSON —Ñ–∞–π–ª–∏)

`manual_ratings.json` (–∫–ª—é—á ‚Äî —ñ–º‚Äô—è —Ñ–∞–π–ª—É –≤—ñ–¥–µ–æ):
```json
{
  "sample_1699999999.mp4": {
    "rating": {
      "overall_quality": 7,
      "visual_quality": 8,
      "motion_quality": 6,
      "prompt_adherence": 7,
      "creativity": 7,
      "technical_quality": 7,
      "is_reference": true,
      "comments": "–î–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–æ–±—Ä–µ"
    },
    "timestamp": 1700000000.0,
    "rated_at": "2025-09-10 12:00:00"
  }
}
```

`knowledge.json` (—Å–ø—Ä–æ—â–µ–Ω–æ):
```json
{
  "best_score": 8.5,
  "best_params": { "prompt": "...", "params": {"fps": 20, "width": 768, "height": 432}, "combo": ["sampler","scheduler"], "manual_rating": {"overall_quality": 9} },
  "history": [
    {
      "video": "/workspace/ComfyUI/output/sample_1699999999.mp4",
      "timestamp": 1699999999,
      "prompt": "...",
      "params": {"fps": 20, "width": 768, "height": 432, "sampler": "euler", "scheduler": "karras"},
      "combo": ["euler", "karras"],
      "metrics": {"overall": 0.72}
    }
  ]
}
```

`bandit_state.json` (–º—ñ–Ω—ñ–º—É–º –¥–ª—è –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤):
```json
{ "arms": [], "N": [], "S": [], "t": 42, "banned_combos": ["euler|karras|20|7|25|768x432"] }
```

`review_queue.json` (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π, –∑–±–∞–≥–∞—á—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ QA‚Äë—Ä–µ–∂–∏–º—ñ):
```json
{ "pending": [ { "original_path": "/workspace/ComfyUI/output/sample_1699999999.mp4", "auto_metrics": {"overall": 0.7}, "params": {"fps": 20}, "combo": ["euler","karras"] } ] }
```

---

### –í—ñ–¥–æ–º—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏
- –®–ª—è—Ö–∏ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—ñ–≤ –∂–æ—Ä—Å—Ç–∫–æ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –ø—ñ–¥ RunPod (–¥–∏–≤. –∫–æ–¥ —É `__init__`). –î–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–Ω–µ—Å—Ç–∏ —É –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞/CLI.
- –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π: `8189` (–¥–∏–≤. –Ω–∏–∑ —Ñ–∞–π–ª—É `simple_web_server.py`).
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –≤—ñ–¥—Å—É—Ç–Ω—ñ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —É –¥–æ–≤—ñ—Ä–µ–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ (RunPod pod/Jupyter), –Ω–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É —É –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç.

---

### –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ (Troubleshooting)
- –ù–µ–º–∞—î –≤—ñ–¥–µ–æ –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ:
  - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `.mp4` –ª–µ–∂–∞—Ç—å —É `/workspace/ComfyUI/output/` (–∞–±–æ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ).
- `/api/stats` –ø–æ–∫–∞–∑—É—î –Ω—É–ª—ñ:
  - –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è ¬´—á–∏—Å—Ç–æ–≥–æ¬ª —Å—Ç–∞—Ä—Ç—É; –ø—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π/–æ—Ü—ñ–Ω–æ–∫ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω—è—Ç—å—Å—è.
- –ü–æ–º–∏–ª–∫–∏ –¥–æ—Å—Ç—É–ø—É/—à–ª—è—Ö—ñ–≤:
  - –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–∞—Ç–∞–ª–æ–≥–∏ –∑–≥—ñ–¥–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó. RunPod: `/workspace/ComfyUI/output` —ñ `/workspace/wan22_system/auto_state`.
- 404 –¥–ª—è `/video/<name>`:
  - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î –ø—ñ–¥ —Ç–æ—á–Ω–∏–º —ñ–º‚Äô—è–º —ñ —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–∞—Ç–∞–ª–æ–∑—ñ.
- CORS/–±—Ä–∞—É–∑–µ—Ä–Ω—ñ –ø–æ–º–∏–ª–∫–∏:
  - –°–µ—Ä–≤–µ—Ä –¥–æ–¥–∞—î `Access-Control-Allow-Origin: *` –¥–ª—è API; —è–∫—â–æ –≤–∏ –∑–º—ñ–Ω—é–≤–∞–ª–∏ –∫–æ–¥/—Ö–æ—Å—Ç–∏–Ω–≥, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

---



